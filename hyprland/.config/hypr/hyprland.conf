# ########################################################################### #
#                                                                             #
#    ████████╗██████╗ ██╗███╗   ███╗ ██████╗██╗      █████╗ ██╗███╗   ██╗     #
#    ╚══██╔══╝██╔══██╗██║████╗ ████║██╔════╝██║     ██╔══██╗██║████╗  ██║     #
#       ██║   ██████╔╝██║██╔████╔██║██║     ██║     ███████║██║██╔██╗ ██║     #
#       ██║   ██╔══██╗██║██║╚██╔╝██║██║     ██║     ██╔══██║██║██║╚██╗██║     #
#       ██║   ██║  ██║██║██║ ╚═╝ ██║╚██████╗███████╗██║  ██║██║██║ ╚████║     #
#       ╚═╝   ╚═╝  ╚═╝╚═╝╚═╝     ╚═╝ ╚═════╝╚══════╝╚═╝  ╚═╝╚═╝╚═╝  ╚═══╝     #
#                                                                             #
#        Arthur McLain (trimclain)                                            #
#        mclain.it@gmail.com                                                  #
#        https://github.com/trimclain                                         #
#                                                                             #
# ########################################################################### #

# {{{ Monitors
# See https://wiki.hypr.land/Configuring/Monitors/
# Format: monitor = name, resolution, position, scale
# monitor=,preferred,auto,auto
monitor=LVDS-1,preferred,auto,auto
monitor=DP-1,disable
# monitor=LVDS-1,disable
# monitor=DP-1,preferred,auto,auto
# }}}

# {{{ (Environment) Variables
# See https://wiki.hypr.land/Configuring/Keywords/
# @opts SUPER | ALT
$mainMod = ALT
$altMod = SUPER

# use $TERMINAL from /etc/environment if available
# See https://wiki.hypr.land/Hypr-Ecosystem/hyprlang/#conditionals
# hyprlang if TERMINAL
$terminal = $TERMINAL
# hyprlang endif
# hyprlang if !TERMINAL
$terminal = kitty
# hyprlang endif

$browser = thorium-browser
# $fileManager = pcmanfm
$screenlock = hyprlock
# $cursorTheme = volantes_cursors
# $cursorSize = 24
$cursorTheme = Bibata-Modern-Classic
$cursorSize = 20

# wether to enable shadow and blur
$dontSaveBattery = false

# See https://wiki.hypr.land/Configuring/Environment-variables/
env = XCURSOR_SIZE,$cursorSize
env = XCURSOR_THEME,$cursorTheme
#env = HYPRCURSOR_SIZE,$cursorSize
#env = HYPRCURSOR_THEME,$cursorTheme
# }}}

# {{{ General
general {
    # See https://wiki.hypr.land/Configuring/Variables/#general
    gaps_in = 4 # 5
    gaps_out = 8 # 20

    border_size = 2

    # https://wiki.hypr.land/Configuring/Variables/#variable-types for info about colors
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
    # col.active_border=rgba(33ccffee)
    # col.inactive_border=0x11111b

    # enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = true

    # Please see https://wiki.hypr.land/Configuring/Tearing/ before you turn this on
    allow_tearing = false

    layout = master # dwindle
    # layout = scrolling # from hyprland-plugins
}
# }}}

# {{{ Decoration
decoration {
    # See https://wiki.hypr.land/Configuring/Variables/#decoration
    rounding = 7 # 10
    rounding_power = 2

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = 1.0

    shadow {
        enabled = $dontSaveBattery
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    blur {
        # See https://wiki.hypr.land/Configuring/Variables/#blur
        enabled = $dontSaveBattery
        size = 3
        passes = 1

        vibrancy = 0.1696
    }
}
# }}}

# {{{ Animations
animations {
    # See https://wiki.hypr.land/Configuring/Variables/#animations
    enabled = yes, please :)

    # Default curves, see https://wiki.hypr.land/Configuring/Animations/#curves
    #        NAME,           X0,   Y0,   X1,   Y1
    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear,         0,    0,    1,    1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    # Default animations, see https://wiki.hypr.land/Configuring/Animations/
    #           NAME,          ONOFF, SPEED, CURVE,        [STYLE]
    animation = global,        1,     10,    default
    animation = border,        1,     5.39,  easeOutQuint
    animation = windows,       1,     4.79,  easeOutQuint
    animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87%
    animation = windowsOut,    1,     1.49,  linear,       popin 87%
    animation = fadeIn,        1,     1.73,  almostLinear
    animation = fadeOut,       1,     1.46,  almostLinear
    animation = fade,          1,     3.03,  quick
    animation = layers,        1,     3.81,  easeOutQuint
    animation = layersIn,      1,     4,     easeOutQuint, fade
    animation = layersOut,     1,     1.5,   linear,       fade
    animation = fadeLayersIn,  1,     1.79,  almostLinear
    animation = fadeLayersOut, 1,     1.39,  almostLinear

    ############################## Workspaces #################################

    # # Default Slide
    # animation = workspaces,    1,     6,     default

    # Fade
    animation = workspaces,    1,     1.94,  almostLinear, fade
    animation = workspacesIn,  1,     1.21,  almostLinear, fade
    animation = workspacesOut, 1,     1.94,  almostLinear, fade

    # # BounceSlide
    # bezier = bounceSlide, 0.2, 0.8, 0.2, 1.25
    # animation = workspaces,    1, 3.5, bounceSlide, slide
    # animation = workspacesIn,  1, 3.5, bounceSlide, slide
    # animation = workspacesOut, 1, 3.5, bounceSlide, slide

    # # HyperZoom Warp
    # bezier = warpCurve, 0.1, 0.1, 0.15, 1
    # animation = workspaces,    1, 7, warpCurve, slidefade
    # animation = workspacesIn,  1, 7, warpCurve, slidefade
    # animation = workspacesOut, 1, 7, warpCurve, slidefade

    # # Cinematic Vertical SlideFade
    # bezier = cineEase, 0.2, 0.9, 0.15, 1
    # animation = workspaces,    1, 3.5, cineEase, slidefadevert
    # animation = workspacesIn,  1, 3.5, cineEase, slidefadevert
    # animation = workspacesOut, 1, 3.5, cineEase, slidefadevert

    ###########################################################################

    animation = zoomFactor,    1,     7,     quick
}
# }}}

# {{{ Input and Gestures
input {
    # See https://wiki.hypr.land/Configuring/Variables/#input
    kb_layout = us,ru
    kb_variant =
    kb_model =
    kb_options = grp:win_space_toggle
    kb_rules =

    repeat_rate = 25
    repeat_delay = 400

    follow_mouse = 0 # 1

    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = true # false
        tap-to-click = true
    }
}

# See https://wiki.hypr.land/Configuring/Gestures
gesture = 3, horizontal, workspace

# Example per-device config
# See https://wiki.hypr.land/Configuring/Keywords/#per-device-input-configs for more
#device {
#    name = epic-mouse-v1
#    sensitivity = -0.5
#}
# }}}

# {{{ Cursor
cursor {
    # See https://wiki.hypr.land/Configuring/Variables/#cursor
    hide_on_key_press = true # false
}
# }}}

# {{{ Layouts
master {
    # See https://wiki.hypr.land/Configuring/Master-Layout/
    # newly open window should replace the master
    #new_status = master
}

dwindle {
    # See https://wiki.hypr.land/Configuring/Dwindle-Layout/
    # 0 -> split follows mouse (default)
    # 1 -> always split to the left (new = left or top)
    # 2 -> always split to the right (new = right or bottom)
    force_split = 2
}

# plugin {
#     hyprscrolling {
#         # See https://github.com/hyprwm/hyprland-plugins/tree/main/hyprscrolling
#         fullscreen_on_one_column = true
#         focus_fit_method = 1 # 0 - center (default), 1 - fit
#     }
# }

# }}}

# {{{ Window Rules
# See https://wiki.hypr.land/Configuring/Window-Rules/

# To get more information about a window class use `hyprctl clients`
windowrulev2 = float,class:^(yad)$,

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
# }}}

# {{{ Workspace Rules
# See https://wiki.hypr.land/Configuring/Workspace-Rules/ for workspace rules
# workspace = 7, monitor:HDMI-A-1, default:true
# workspace = 8, monitor:HDMI-A-1, default:true
# workspace = 9, monitor:HDMI-A-1, default:true
# }}}

# {{{ Permissions
# See https://wiki.hypr.land/Configuring/Permissions/
# Please note permission changes here require a Hyprland restart and are not applied on-the-fly
# for security reasons

ecosystem {
    no_update_news = true # false
    no_donation_nag = true # false
    # enforce_permissions = true # false
}

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow
# }}}

# {{{ Keybinds
# See https://wiki.hypr.land/Configuring/Binds/
bind = $mainMod, Q, killactive,

bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, B, exec, $browser

bind = $mainMod SHIFT, R, exec, hyprctl reload
bind = $mainMod SHIFT, E, exit

# I should maybe consider switching to one of these:
# https://github.com/hyprland-community/awesome-hyprland#runners-menus-and-application-launchers
bind = $mainMod, D, exec, rofi -show drun
bind = $mainMod, R, exec, rofi -show run

bind = $mainMod, 0, exec, ~/.local/bin/powermenu

##############
### LAYOUT ###
##############

## Master and Dwindle Layouts
# Move focus
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
#
# Move active window
bind = $mainMod SHIFT, h, movewindow, l
bind = $mainMod SHIFT, l, movewindow, r
bind = $mainMod SHIFT, k, movewindow, u
bind = $mainMod SHIFT, j, movewindow, d

# ## Scrolling Layout
# # Move focus
# bind = $mainMod, l, layoutmsg, move +col
# bind = $mainMod, h, layoutmsg, move -col
# #
# # Move active window
# bind = $mainMod SHIFT, l, layoutmsg, movewindowto r
# bind = $mainMod SHIFT, h, layoutmsg, movewindowto l
# bind = $mainMod SHIFT, k, layoutmsg, movewindowto u
# bind = $mainMod SHIFT, j, layoutmsg, movewindowto d

# Resize windows
# bind = $mainMod, MINUS, resizeactive, -40 0
# bind = $mainMod, EQUAL, resizeactive, 40 0
bind = $mainMod, left, resizeactive, -40 0
bind = $mainMod, right, resizeactive, 40 0
bind = $mainMod CTRL, h, resizeactive, -40 0
bind = $mainMod CTRL, l, resizeactive, 40 0

# Move/resize windows with mainMod + LMB/RMB and dragging
binds {
    drag_threshold = 10  # Fire a drag event only after dragging for more than 10px
}
# INFO: LMB -> 272; RMB -> 273; MMB -> 274
# use `wev` to detect other mouse button key codes
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

bind = $mainMod, F, fullscreen, 0
bind = $mainMod, SPACE, togglefloating,

###############
### HOTKEYS ###
###############
# Take a screenshot
bind = $mainMod, P, exec, ~/.local/bin/screenshot screen
bind = $mainMod, S, exec, ~/.local/bin/screenshot region
# I'm kinda used to this on windows
binds = Super_L&Shift_L, S, exec, ~/.local/bin/screenshot region

# Toggle german keyboard layout (allowed in lockscreen)
bindl = $altMod, D, exec, ~/.local/bin/keyboard-layout --toggle

# Screen locker
bind = $altMod, L, exec, $screenlock

# Use brightnessctl to adjust screen brightness
binde = ,XF86MonBrightnessUp, exec, ~/.local/bin/brightness-control --increase
binde = ,XF86MonBrightnessDown, exec, ~/.local/bin/brightness-control --decrease

# Use pactl and pacmd to adjust volume with PulseAudio
binde = ,XF86AudioRaiseVolume, exec, ~/.local/bin/volume-control --increase
binde = ,XF86AudioLowerVolume, exec, ~/.local/bin/volume-control --decrease
bind = ,XF86AudioMute, exec, ~/.local/bin/volume-control --toggle-mute
bind = ,XF86AudioMicMute, exec, ~/.local/bin/volume-control --toggle-micro-mute
bind = $altMod, P, exec, ~/.local/bin/volume-control --toggle-micro-mute

####################
### GLOBAL BINDS ###
####################
# See https://wiki.hypr.land/Configuring/Binds/#global-keybinds
# pass the default OBS "Start/Stop Recording" keybind to make it work globally
#bind = SUPER, F10, pass, class:^(com\.obsproject\.Studio)$
# send SUPER + F4 to OBS when SUPER + F10 is pressed
#bind = SUPER, F10, sendshortcut, SUPER, F4, class:^(com\.obsproject\.Studio)$
# Discord
bind = ALT, mouse:276, pass, class:^(discord)$ # Toggle Mute
bind = ALT, mouse:275, pass, class:^(discord)$ # Toggle Deafen

################
### Triggers ###
################
# NOTE: You can view your switches with hyprctl devices
# WARN: Systemd HandleLidSwitch settings in logind.conf may conflict with
# Hyprland’s laptop lid switch configurations.
# TODO:
# checkout switches in `hyprctl devices`
# trigger when the switch is toggled
#bindl=,switch:[switch name],exec,hyprlock
# trigger when the switch is turning on
#bindl=,switch:on:[switch name],exec,hyprctl keyword monitor "eDP-1, 2560x1600, 0x0, 1"
# trigger when the switch is turning off
#bindl=,switch:off:[switch name],exec,hyprctl keyword monitor "eDP-1, disable"

##############
### SCREEN ###
##############
# Switch between monitors
# See https://wiki.hypr.land/Configuring/Dispatchers/#parameter-explanation
bind = $mainMod, period, focusmonitor, +1
bind = $mainMod, comma, focusmonitor, -1

###############
### SUBMAPS ###
###############
# Resize
bind = $altMod, R, submap, resize
submap = resize
binde = ,right, resizeactive, 10 0
binde = ,left, resizeactive, -10 0
binde = ,up, resizeactive, 0 -10
binde = ,down, resizeactive, 0 10
bind = ,escape, submap, reset
submap=reset

# Monitor Layout
bind = $altMod, M, submap, monitor-layout
submap = monitor-layout
binde = ,1, exec, ~/.local/bin/monitor-layout --first
bind = ,1, submap, reset
binde = ,2, exec, ~/.local/bin/monitor-layout --second
bind = ,2, submap, reset
binde = ,e, exec, ~/.local/bin/monitor-layout --extend
bind = ,e, submap, reset
binde = ,d, exec, ~/.local/bin/monitor-layout --duplicate
bind = ,d, submap, reset
bind = ,escape, submap, reset
submap=reset

# Keyboard Layout
bind = $mainMod, O, submap, keyboard_layout
submap = keyboard_layout
bind = ,1, exec, hyprctl keyword input:kb_layout us,ru
bind = ,1, submap, reset
bind = ,2, exec, hyprctl keyword input:kb_layout de
bind = ,2, submap, reset
bind = ,escape, submap, reset
submap=reset

##################
### WORKSPACES ###
##################
# Switch workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
# bind = $mainMod, 0, workspace, 10

# Move active window to a workspace (silent means don't follow)
bind = $mainMod SHIFT, 1, movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, movetoworkspacesilent, 9
# bind = $mainMod SHIFT, 0, movetoworkspacesilent, 10
# }}}

# {{{ Miscellaneous
misc {
    # See https://wiki.hypr.land/Configuring/Variables/#misc
    disable_hyprland_logo = true # false
    disable_splash_rendering = true # false
    #mouse_move_enables_dpms = true
    # saves some battery; reload manually with `hyprctl reload`
    disable_autoreload = true
    focus_on_activate = true
    anr_missed_pings = 3 # 5
}
# }}}

# {{{ Launch on Start
# Monitor Layout (runs on every config reload due to how it works)
exec = ~/.local/bin/monitor-layout --startup
# Status Bar (runs on every config reload to restart IPC for hypr/workspaces)
exec = ~/.config/waybar/launch.sh

# Notification Manager
exec-once = dunst
# Network Manager
exec-once = nm-applet
# Authentification Agent for GUI sudo popups
exec-once = systemctl --user start hyprpolkitagent
# Wallpaper
exec-once = waypaper --backend hyprpaper --restore
# Cursor theme
exec-once = hyprctl setcursor $cursorTheme $cursorSize
# Idle Manager
exec-once = hypridle
# Blue Light Manager
exec-once = hyprsunset
# }}}

# vim:foldmethod=marker:filetype=hyprlang
